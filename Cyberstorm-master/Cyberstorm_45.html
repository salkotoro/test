<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CyberStorm – Kodjakten</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
<img id="logo" src="cybersec-left-logo-rgb-neg-720x168-png.webp" alt="Cyberstorm Logo" style="max-width: 200px; margin-bottom: 20px;">
<h1 id="title">CyberStorm – Kodjakten</h1>


<!-- SECRET EXPLOSION -->

<div id="explosion-overlay" class="hidden">
    <div class="explosion-text">Hemliga uppdrag</div>
</div>

<!-- UPPDRAG KRYPTOGRAM -->
<div class="container" id="task1">
    <div id="back-to-result" class="hidden" style="margin-bottom: 15px;">
        <button onclick="goToResult()" style="background-color:#002b1f; color:#00ffaa; border: 1px solid #00ffaa55;">
            ◀ Tillbaka till kodord
        </button>
    </div>
    <h2 class="task-title" data-title="🔓 Dekryptera meddelandet">Uppdrag: 🔓 Dekryptera meddelandet</h2>

    <img src="caesar.png" alt="Caesar-krypto-exempel">
    <p>Vad är det dekrypterade lösenordet?</p>
    <div class="codebox">KHPOLJWRUG 567</div>
    <input type="text" id="answer1" placeholder="Skriv ditt svar här...">
    <button onclick="checkCryptogram(1)">🔓 Verifiera</button>
    <button id="tip-btn-cryptogram" onclick="toggleTipCryptogram()" style="display: none; margin-top: 10px;">💡 Visa tips</button>
    <div id="tip-box-cryptogram" style="display: none; margin-top: 10px; border: 1px dashed #00ffaa; padding: 10px;">
        🔍 TIPS: Ibland kan bokstäver förskjutas i alfabetet. Kan du hitta något som hjälper dig läsa meddelandet baklänges eller tre steg tillbaka? bokstaven. Första två bokstäver blir HE------------
    </div>
    <div class="feedback" id="feedback1"></div>
    <button class="hidden next-btn" id="next1" onclick="goToNext(1)">➡ Nästa uppdrag</button>
</div>



<!-- UPPDRAG LÖSENORD -->
<div class="container hidden" id="task2">
    <div id="back-to-result" class="hidden" style="margin-bottom: 15px;">
        <button onclick="goToResult()" style="background-color:#002b1f; color:#00ffaa; border: 1px solid #00ffaa55;">
            ◀ Tillbaka till kodord
        </button>
    </div>
    <h2 class="task-title" data-title="💪 Starkaste lösenordet">Uppdrag: 💪 Starkaste lösenordet</h2>

    <img src="passwords.png" alt="Starka lösenord">
    <p>
        🕵️ Skuggan är listig – och vet hur man väljer starka lösenord. Flera lösenordslappar har hittats – men bara tre av dem håller måttet för att skydda servern där den hemliga planen finns lagrad. Din uppgift är att ta reda på vilket som är starkt nog att vara Skuggans sanna lösenord. Lycka till, agent!
    </p>
    <p>
        Här är 12 lösenord. Välj de <strong>3 starkaste</strong>. Fundera på vad som gör ett lösenord säkert!
    </p>
    <div id="password-options">
        <label><input type="checkbox" value="123456"> 123456</label><br>
        <label><input type="checkbox" value="qwerty"> qwerty</label><br>
        <label><input type="checkbox" value="JagälskarBanana#2023!"> JagälskarBanana#2023!</label><br>
        <label><input type="checkbox" value="NallePuh#2024!"> NallePuh#2024!</label><br>
        <label><input type="checkbox" value="letmein"> letmein</label><br>
        <label><input type="checkbox" value="SäkerKod88#hemlig!"> SäkerKod88#hemlig!</label><br>
        <label><input type="checkbox" value="password"> password</label><br>
        <label><input type="checkbox" value="MinHund123"> MinHund123</label><br>
        <label><input type="checkbox" value="a!#56A"> a!#56A</label><br>
        <label><input type="checkbox" value="Stark!2025"> Stark!2025</label><br>
        <label><input type="checkbox" value="adminadmin"> adminadmin</label><br>
        <label><input type="checkbox" value="Lösen#Bok2024Astrid"> Lösen#Bok2024Astrid</label><br>
    </div>
    <button onclick="checkPasswords(2)">🔓 Verifiera val</button>
    <button id="tip-btn-passwords" onclick="toggleTipPasswords()" style="display: none; margin-top: 10px;">💡 Visa tips</button>

    <div id="tip-box-passwords" style="display: none; margin-top: 10px; border: 1px dashed #00ffaa; padding: 10px;">
        🔍 TIPS: Ett starkt lösenord är långt, har stora och små bokstäver, siffror och symboler. Korta ord och upprepningar är dåliga!
    </div>
    <div id="password-result" style="margin-top: 10px;"></div>
    <div class="feedback" id="feedback2"></div>
    <button class="hidden next-btn" id="next2" onclick="goToNext(2)">➡ Nästa uppdrag</button>
</div>

<!-- UPPDRAG PHSISHING -->
<div class="container hidden" id="task3">
    <h2 class="task-title" data-title="📧 Phishingfällan">Uppdrag: 📧 Phishingfällan</h2>
    <div id="step1">
        <img src="mail2.png" alt="Mail 1">
        <p>Misstänker du att detta är ett phishingmail?</p>
        <button onclick="answerPhish(1, true)">JA</button>
        <button onclick="answerPhish(1, false)">NEJ</button>
        <button id="tip-btn-phishing1" onclick="toggleTipPhishing1()" style="display: none; margin-top: 20px;">💡 Visa tips</button>
        <div id="tip-box-phishing1" class="hidden" style="margin-top: 10px; border: 1px dashed #00ffaa; padding: 10px;">
            🔍 TIPS: Kolla avsändare, språkfel och konstiga länkar.
        </div>
        <div id="phish-feedback-1" class="feedback"></div>
    </div>

    <!-- Reasons for MAIL 1 -->
    <div id="reasons1" class="hidden">
        <p>Varför tror du att det är phishing? Välj exakt 4:</p>
        <div style="display: flex; flex-direction: column;">
            <label><input type="checkbox" value="hot"> Hotfull ton</label>
            <label><input type="checkbox" value="felstav"> Stavfel</label>
            <label><input type="checkbox" value="gmail"> Gmail-adress</label>
            <label><input type="checkbox" value="pris"> Prislöfte</label>
            <label><input type="checkbox" value="design"> Färgglad design</label>
            <label><input type="checkbox" value="lank"> Innehåller länk</label>
        </div>
        <button onclick="checkReasons(1, ['hot','felstav','gmail','lank'], 'step2')">✔ Bekräfta</button>
        <div id="reason-feedback-1" class="feedback"></div>
    </div>

    <!-- STEP 2: MAIL 2 -->
    <div id="step2" class="hidden">
        <img src="mail1.png" alt="Mail 2">
        <p>Misstänker du att detta är ett phishingmail?</p>
        <button onclick="answerPhish(2, true)">JA</button>
        <button onclick="answerPhish(2, false)">NEJ</button>
        <button id="tip-btn-phishing2" onclick="toggleTipPhishing2()" style="display: none; margin-top: 20px;">💡 Visa tips</button>
        <div id="tip-box-phishing2" class="hidden" style="margin-top: 10px; border: 1px dashed #00ffaa; padding: 10px;">
            🔍 TIPS: Verkar det komma från skolan? Stämmer språket?
        </div>


        <div id="phish-feedback-2" class="feedback"></div>
    </div>
    <!-- Reasons for MAIL 2 -->
    <div id="reasons2" class="hidden">
        <p>Varför tror du att det är INTE phishing? Välj exakt 3:</p>
        <div style="display: flex; flex-direction: column;">
            <label><input type="checkbox" value="skol_dom"> Mejlet kommer från skolans domän, t.ex. @skolan.se</label>
            <label><input type="checkbox" value="logik"> Mejlet har en logisk anledning (t.ex. information om skolstart)</label>
            <label><input type="checkbox" value="noclick"> Inget krav på lösenord eller klick</label>
            <label><input type="checkbox" value="felstav"> Otydligt språk med stavfel</label>
            <label><input type="checkbox" value="hot"> brådska eller hotfull ton</label>
        </div>
        <button onclick="checkReasons(2, ['skol_dom','logik', 'noclick'], 'step3')">✔ Bekräfta</button>
        <div id="reason-feedback-2" class="feedback"></div>
    </div>
    <!-- STEP 3: MAIL 3 -->
    <div id="step3" class="hidden">
        <img src="mail3.png" alt="Mail 3">
        <p>Misstänker du att detta är ett phishingmail?</p>
        <button onclick="answerPhish(3, true)">JA</button>
        <button onclick="answerPhish(3, false)">NEJ</button>
        <button id="tip-btn-phishing3" onclick="toggleTipPhishing3()" style="display: none; margin-top: 20px;">💡 Visa tips</button>
        <div id="tip-box-phishing3" class="hidden" style="margin-top: 10px; border: 1px dashed #00ffaa; padding: 10px;">
            🔍 TIPS: Ser du något om priser, lösenord eller brådska?
        </div>


        <div id="phish-feedback-3" class="feedback"></div>
    </div>
    <!-- Reasons for MAIL 3 -->
    <div id="reasons3" class="hidden">
        <p>Varför tror du att det är phishing? Välj exakt 3:</p>
        <div style="display: flex; flex-direction: column;">
            <label><input type="checkbox" value="emojes"> Emojis 🧩</label>
            <label><input type="checkbox" value="hot"> Bråskande </label>
            <label><input type="checkbox" value="lank"> Kan innehålla farlig länk</label>
            <label><input type="checkbox" value="gmail"> fel domän </label>
            <label><input type="checkbox" value="pris"> Prislöfte</label>
        </div>
        <button onclick="checkReasons(3, ['hot','lank','pris'])">✔ Bekräfta</button>
        <div id="reason-feedback-3" class="feedback"></div>
    </div>
    <button class="hidden next-btn" id="next3" onclick="goToNext(3)">➡ Nästa uppdrag</button>
</div>

<!-- UPPDRAG DRAG & DROP -->
<div class="container hidden" id="task4">
    <h2 class="task-title" data-title="🧩 Säkert eller Osäkert?">Uppdrag: 🧩 Säkert eller Osäkert?</h2>
    <p>Dra varje fråga till rätt kategori. Vad är säkert? Vad är osäkert?</p>
    <p>
        TIPS: Tryck på
        <button class="read-more-btn" type="button" onclick="resetHelp()">❓</button>
        knappen i varje ruta för att få hjälp!
    </p>

    <p><strong>OBS!</strong> Använd dina tips varsamt, du får endast <strong>3</strong>!</p>

    <p><strong>Tips kvar:</strong> <span id="help-remaining" style="font-weight: bold;">3</span></p>

    <div style="display: flex; gap: 20px; flex-wrap: wrap;">
        <div style="flex: 1;">
            <h3>Frågor</h3>
            <div id="items" class="drop-zone" style="border: 1px solid #00ffaa55; padding: 10px; min-height: 150px;">
                <!-- Drag-items skapas av JavaScript -->
            </div>
        </div>
        <div style="flex: 1;">
            <h3>Säkert ✅</h3>
            <div id="safe-zone" class="drop-zone"></div>
        </div>
        <div style="flex: 1;">
            <h3>Osäkert ❌</h3>
            <div id="danger-zone" class="drop-zone"></div>
        </div>
    </div>

    <button onclick="checkDragDrop(4)">🔓 Verifiera</button>
    <div class="feedback" id="feedback4" style="margin-top: 15px;"></div>
    <button class="hidden next-btn" id="next4" onclick="goToNext(4)">➡ Visa slutresultat</button>
</div>

<!-- UPPDRAG MORSE -->
<div class="container hidden" id="task5">
    <div id="back-to-result" class="hidden" style="margin-bottom: 15px;">
        <button onclick="goToResult()" style="background-color:#002b1f; color:#00ffaa; border: 1px solid #00ffaa55;">
            ◀ Tillbaka till kodord
        </button>
    </div>
    <h2 class="task-title" data-title="📡 Morsekoden">Uppdrag: 📡 Morsekoden</h2>

    <p>🔦 Titta noga på blinkningarna för varje bokstav. Skriv in den bokstav du tror visas.</p>

    <div style="display: flex; justify-content: center; gap: 40px; flex-wrap: nowrap; margin-bottom: 20px;">
        <!-- BOKSTAV 1 -->
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div id="morse-light-1" style="width: 60px; height: 60px; background-color: #0f0f0f; border: 2px solid #00ffaa; border-radius: 50%; margin-bottom: 10px;"></div>
            <button onclick="startMorseLetter(1)">▶ Morse 1</button>
            <input type="text" id="morse-input-1" maxlength="1" placeholder="Bokstav 1" style="margin-top: 5px; text-align: center;">
            <div id="morse-feedback-1" class="feedback" style="min-height: 20px;"></div>
        </div>

        <!-- BOKSTAV 2 -->
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div id="morse-light-2" style="width: 60px; height: 60px; background-color: #0f0f0f; border: 2px solid #00ffaa; border-radius: 50%; margin-bottom: 10px;"></div>
            <button onclick="startMorseLetter(2)">▶ Morse 2</button>
            <input type="text" id="morse-input-2" maxlength="1" placeholder="Bokstav 2" style="margin-top: 5px; text-align: center;">
            <div id="morse-feedback-2" class="feedback" style="min-height: 20px;"></div>
        </div>

        <!-- BOKSTAV 3 -->
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div id="morse-light-3" style="width: 60px; height: 60px; background-color: #0f0f0f; border: 2px solid #00ffaa; border-radius: 50%; margin-bottom: 10px;"></div>
            <button onclick="startMorseLetter(3)">▶ Morse 3</button>
            <input type="text" id="morse-input-3" maxlength="1" placeholder="Bokstav 3" style="margin-top: 5px; text-align: center;">
            <div id="morse-feedback-3" class="feedback" style="min-height: 20px;"></div>
        </div>
    </div>

    <div style="display: flex; gap: 10px; justify-content: center; margin-top: 10px;">
        <button onclick="checkMorse(5)">🔓 Verifiera bokstäver</button>
        <button onclick="toggleMorseTip()">💡 Visa Morse-tabell</button>
    </div>
    <div id="feedback5" class="feedback" style="margin-top: 15px;"></div>
    <button class="hidden next-btn" id="next5" onclick="goToNext(5)">➡ Nästa uppdrag</button>


    <!-- Morse-tabellen finns kvar -->
    <div id="morse-tip-box" style="display: none; margin-top: 20px; border: 1px dashed #00ffaa; padding: 10px; color: #aaffaa;">
        <strong>📖 Morse-alfabet:</strong><br><br>
        A: •–<br>
        B: –•••<br>
        C: –•–•<br>
        D: –••<br>
        E: •<br>
        F: ••–•<br>
        G: ––•<br>
        H: ••••<br>
        I: ••<br>
        J: •–––<br>
        K: –•–<br>
        L: •–••<br>
        M: ––<br>
        N: –•<br>
        O: –––<br>
        P: •––•<br>
        Q: ––•–<br>
        R: •–•<br>
        S: •••<br>
        T: –<br>
        U: ••–<br>
        V: •••–<br>
        W: •––<br>
        X: –••–<br>
        Y: –•––<br>
        Z: ––••<br><br>
        1: •––––<br>
        2: ••–––<br>
        3: •••––<br>
        4: ••••–<br>
        5: •••••<br>
        6: –••••<br>
        7: ––•••<br>
        8: –––••<br>
        9: ––––•<br>
        0: –––––<br>
    </div>
</div>
</div>

<div class="container hidden" id="task6">
    <div id="back-to-result" class="hidden" style="margin-bottom: 15px;">
        <button onclick="goToResult()" style="background-color:#002b1f; color:#00ffaa; border: 1px solid #00ffaa55;">
            ◀ Tillbaka till kodord
        </button>
    </div>
    <h2 class="task-title" data-title="🔦 UV-skattjakt">Uppdrag: 🔦 UV-skattjakt</h2>

    <!-- A-FRÅGA -->
    <div>
        <h3 id="uv-title-a">A. Leta med UV-lampa</h3>
        <div id="uv-a-content">
            <p>🔦 I rummet finns ett dolt kodord skrivet med UV-bläck. Använd UV-lampan och hitta det gömda ordet!</p>
            <p>När du hittat ordet, skriv in det här:</p>
            <input type="text" id="answer6a" placeholder="Skriv kodordet här...">
            <button onclick="checkUV_A()">🔓 Verifiera "A"</button>
            <button id="tip-btn-uv" onclick="toggleTipUV()" style="display: none; margin-top: 10px;">💡 Visa tips</button>

            <div id="tip-box-uv" style="display: none; margin-top: 10px; border: 1px dashed #00ffaa; padding: 10px;">
                🔍 TIPS: Leta nära hörn, under bord eller bakom saker där skuggan döljer hemligheter...
            </div>
            <div class="feedback" id="feedback6a" style="margin-top: 15px;"></div>
        </div>
    </div>

    <hr style="margin: 30px 0;">
    <h3 id="uv-title-b" style="opacity: 0.4;">B. Steganografi – Dold information i bilder</h3>

    <!-- Innehåll för fråga B -->
    <div id="uv-part-b" style="display: none;">
        <p>
            Precis som ni nyss använde en UV-lampa för att avslöja ett dolt meddelande, finns det också sätt att gömma information på platser där man inte förväntar sig det – till exempel inuti en bild. Det kallas för <strong>steganografi</strong>.
        </p>

        <p>
            🔍 I rutan nedan finns en bild som kan innehålla något dolt. Du kan zooma och dra runt för att undersöka varje liten detalj. Vad ser du?
        </p>

        <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px auto 5px; max-width: 600px;">
            <span style="font-weight: bold;">🧪 Undersök bilden:</span>
            <button id="reset-btn" onclick="resetZoom()">🔄 Återställ vy</button>
        </div>

        <div id="zoom-container"
             style="width: 100%; max-width: 600px; height: 400px; border: 2px solid #00ffaa; border-radius: 10px; overflow: hidden; margin: auto; position: relative; background-color: #000;">
            <img id="zoom-image"
                 src="steganografi.png"
                 alt="Zoombar bild"
                 style="position: absolute; top: 0; left: 0; user-select: none; pointer-events: none;">
        </div>

        <input type="text" id="answer6b" placeholder="Skriv dolda meddelandet här..." style="margin-top: 15px;">
        <button onclick="checkUV_B()">🔓 Verifiera "B"</button>
        <button id="tip-btn-steganography" onclick="toggleTipSteganography()" style="display: none; margin-top: 10px;">💡 Visa tips</button>

        <div id="tip-box-steganography" style="display: none; margin-top: 10px; border: 1px dashed #00ffaa; padding: 10px;">
            🔍 TIPS: Hemligtheten finns nära shift texten!
        </div>
        <div class="feedback" id="feedback6b" style="margin-top: 15px;"></div>
    </div>

    <button class="hidden next-btn" id="next6" onclick="goToNext(6)">➡ Nästa uppdrag</button>

</div>

<!-- UPPDRAG SPEGELKOD -->
<div class="container hidden" id="task7">
    <div id="back-to-result" class="hidden" style="margin-bottom: 15px;">
        <button onclick="goToResult()" style="background-color:#002b1f; color:#00ffaa; border: 1px solid #00ffaa55;">
            ◀ Tillbaka till kodord
        </button>
    </div>
    <h2 class="task-title" data-title="💎 Spegelvänd Kod">Uppdrag: 💎 Spegelvänd Kod</h2>

    <p>Du har hittat ett papper med ett konstigt ord... Den säger att koden blir tydlig i en spegel?</p>

    <div class="codebox  large-codebox">ƧɘϱnÄlʞAd Avɘ⅃ Әim υb ɿƎƧ bMöϱ И⅃ɘϱɘԳƨ I</div>

    <input type="text" id="answer7" placeholder="Vad står det egentligen?">
    <button onclick="checkMirrorCode(7)">🔓 Verifiera</button>

    <button id="tip-btn-mirror" onclick="toggleTipMirror()" style="display: none; margin-top: 10px;">💡 Visa tips</button>

    <div id="tip-box-mirror" style="display: none; margin-top: 10px; border: 1px dashed #00ffaa; padding: 10px;">
        🔍 TIPS: Titta på symbolerna genom en spegel!
    </div>

    <div class="feedback" id="feedback7" style="margin-top: 15px;"></div>
    <button class="hidden next-btn" id="next7" onclick="goToNext(7)">➡ Nästa uppdrag</button>
</div>

<!-- SISTA SIDAN SOM VISAR ALLA KODORDEN -->
<div class="container hidden" id="result">
    <h2>🕵️‍♀️ Uppdrag slutfört!</h2>
    <p>Grattis agenter! Ni har samlat alla kodord:</p>
    <ul id="codeword-list">
        <!-- Kodorden läggs till här dynamiskt -->
    </ul>
    <p>Visa detta för Agent-X för att slutföra ert uppdrag. 🌟</p>
    <button class="next-btn" style="margin-top: 30px;" onclick="bonusNotAvailable()">🎁 BONUSUPPDRAG</button>
</div>

<div id="material-modal" class="modal-overlay hidden">
    <div class="modal-box">
        <h2 id="material-modal-title">Uppdragstitel</h2>
        <p id="material-modal-text">Här kommer en instruktion för uppdraget.</p>
        <button onclick="closeMaterialModal()">🚀 Jag har allt material!</button>
    </div>
</div>


<!-- SECRET INPUT -->
<div id="secret-input-wrapper" class="hidden glitch-box">
    <label for="secret-input" class="glitch-label">Hemligt kodord:</label>
    <input id="secret-input" type="text" placeholder="Skriv något hemligt...">
</div>

<!-- ====================== INLINE TASK HUB ====================== -->
<script>
    // ***********************************TASK HUB***********************************
    function __shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    /* Tillgängliga uppdrag
      "🔓 Dekryptera meddelandet",
      "💪 Starkaste lösenordet",
      "📧 Phishingfällan",
      "🧩 Säkert eller Osäkert?",
      "🔦 UV-skattjakt",
      "💎 Spegelvänd Kod",
      "📡 Morsekoden",
    */

    // These are global
    const activeTasks = __shuffleArray([
        { title: "🔓 Dekryptera meddelandet", codeWord: "PIXELPÄRON" },
        { title: "📧 Phishingfällan", codeWord: "DATADRUVA" },
        { title: "🧩 Säkert eller Osäkert?", codeWord: "FIKONFIL" },
        { title: "🔦 UV-skattjakt", codeWord: "HACKERHALLON" },
    ]);

    const secretTasks = __shuffleArray([
        { title: "💎 Spegelvänd Kod", codeWord: "KIWIKOD" },
        { title: "💪 Starkaste lösenordet", codeWord: "CYBERCITRON" },
    ]);

    const firstTaskTitle = activeTasks[0].title;

    const activeBonusTasks = [
        { title: "📡 Morsekoden", codeWord: "LÖSENORDLIME" }
    ];
    // ***********************************TASK HUB***********************************
    // -------------------------------------------------------------------------------
</script>

<!-- Main logic -->
<script src="app.js"></script>
</body>
</html>
